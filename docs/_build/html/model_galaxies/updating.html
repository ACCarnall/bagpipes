

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Manipulating models: the update method &mdash; Bagpipes 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Bagpipes 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="Making model galaxies" href="model_galaxies.html"/>
        <link rel="next" title="Model_Galaxy API documentation" href="api_doc.html"/>
        <link rel="prev" title="Obtaining model photometry: defining fields" href="fields.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Bagpipes
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="model_galaxies.html">Making model galaxies</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="model_components.html">Generating models: the model_components dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html">Obtaining model photometry: defining fields</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Manipulating models: the update method</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_doc.html">Model_Galaxy API documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../loading_galaxies/loading_galaxies.html">Loading observational data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fitting_galaxies/fitting_galaxies.html">Fitting observational data</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bagpipes</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="model_galaxies.html">Making model galaxies</a> &raquo;</li>
        
      <li>Manipulating models: the update method</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/model_galaxies/updating.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="manipulating-models-the-update-method">
<h1>Manipulating models: the update method<a class="headerlink" href="#manipulating-models-the-update-method" title="Permalink to this headline">Â¶</a></h1>
<p>When a new <strong>Model_Galaxy</strong> instance is generated, all of the relevant grids of models are loaded up by the code. This takes a long time as the grids are large. The fastest way to generate lots of models with the same overall structure but different values of model parameters is therefore to use the <strong>update</strong> method. Using the example from the <a class="reference external" href="model_components.html">first page</a> in this section we can update the model by:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">bagpipes</span> <span class="k">as</span> <span class="nn">pipes</span>

<span class="n">dust</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dust</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Calzetti&quot;</span>
<span class="n">dust</span><span class="p">[</span><span class="s2">&quot;Av&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="n">dust</span><span class="p">[</span><span class="s2">&quot;eta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>

<span class="n">nebular</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">nebular</span><span class="p">[</span><span class="s2">&quot;logU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.0</span>

<span class="n">dblplaw</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dblplaw</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.</span>
<span class="n">dblplaw</span><span class="p">[</span><span class="s2">&quot;beta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">dblplaw</span><span class="p">[</span><span class="s2">&quot;tau&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">7.0</span>
<span class="n">dblplaw</span><span class="p">[</span><span class="s2">&quot;mass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">11.</span>
<span class="n">dblplaw</span><span class="p">[</span><span class="s2">&quot;metallicity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="n">burst1</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">burst1</span><span class="p">[</span><span class="s2">&quot;age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">burst1</span><span class="p">[</span><span class="s2">&quot;mass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.</span>
<span class="n">burst1</span><span class="p">[</span><span class="s2">&quot;metallicity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="n">burst2</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">burst2</span><span class="p">[</span><span class="s2">&quot;age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">burst2</span><span class="p">[</span><span class="s2">&quot;mass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">9.5</span>
<span class="n">burst2</span><span class="p">[</span><span class="s2">&quot;metallicity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="n">model_comp</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;zred&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;veldisp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">300.</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;a_bc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;nebular&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nebular</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;dust&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dust</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;dblplaw&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dblplaw</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;burst1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">burst1</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;burst2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">burst2</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">pipes</span><span class="o">.</span><span class="n">Model_Galaxy</span><span class="p">(</span><span class="n">model_comp</span><span class="p">,</span> <span class="n">output_specwavs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">5000.</span><span class="p">,</span> <span class="mf">11000.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">))</span>

<span class="n">model</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;dust&quot;</span><span class="p">][</span><span class="s2">&quot;Av&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;dblplaw&quot;</span><span class="p">][</span><span class="s2">&quot;tau&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="n">model_comp</span><span class="p">[</span><span class="s2">&quot;nebular&quot;</span><span class="p">][</span><span class="s2">&quot;logU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.5</span>

<span class="n">model</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">model_comp</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>The <strong>update</strong> method executes in ~1ms, compared to creating the <strong>Model_Galaxy</strong> instance, which takes several seconds.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_doc.html" class="btn btn-neutral float-right" title="Model_Galaxy API documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fields.html" class="btn btn-neutral" title="Obtaining model photometry: defining fields" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Adam Carnall.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>